\hypertarget{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry}{\section{hwm.\-network.\-protocols.\-telemetry.\-Pipeline\-Telemetry Class Reference}
\label{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry}\index{hwm.\-network.\-protocols.\-telemetry.\-Pipeline\-Telemetry@{hwm.\-network.\-protocols.\-telemetry.\-Pipeline\-Telemetry}}
}


Represents a pipeline telemetry connection.  


Inheritance diagram for hwm.\-network.\-protocols.\-telemetry.\-Pipeline\-Telemetry\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a905edbf047171e13942d8e200b8b4bc7}{\-\_\-\-\_\-init\-\_\-\-\_\-}
\begin{DoxyCompactList}\small\item\em Sets up the \hyperlink{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry}{Pipeline\-Telemetry} protocol instance. \end{DoxyCompactList}\item 
def \hyperlink{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a1ed35df69655f6d92f0562bff4be28e1}{write\-\_\-telemetry}
\begin{DoxyCompactList}\small\item\em Sends a telemetry data point to the user. \end{DoxyCompactList}\item 
def \hyperlink{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_af7bb78b3c184071f5824346a6beda2c5}{data\-Received}
\begin{DoxyCompactList}\small\item\em Receives any data that the user may try to send over the connection. \end{DoxyCompactList}\item 
def \hyperlink{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a3924681e40aab5ed413e40cd5031c9c4}{connection\-Made}
\begin{DoxyCompactList}\small\item\em Sets up the telemetry protocol before any data transfer occurs. \end{DoxyCompactList}\item 
\hypertarget{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_acdec77591157f96c8e6886eab4656a71}{def \hyperlink{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_acdec77591157f96c8e6886eab4656a71}{connection\-Lost}}\label{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_acdec77591157f96c8e6886eab4656a71}

\begin{DoxyCompactList}\small\item\em Called when the connection to the user is lost. \end{DoxyCompactList}\item 
def \hyperlink{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a5196bc8e497f981644554fabb94472b9}{perform\-\_\-registrations}
\begin{DoxyCompactList}\small\item\em Performs the necessary registrations between the protocol and its associated session. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a6fbedbfdea09d930e9f631c22f332675}{{\bfseries session\-\_\-coordinator}}\label{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a6fbedbfdea09d930e9f631c22f332675}

\item 
\hypertarget{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a1450a728295ded4baf04a6c3edbef10d}{{\bfseries session}}\label{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a1450a728295ded4baf04a6c3edbef10d}

\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a4c453f4727b3e7ad2f02da3fc998c844}{\-\_\-package\-\_\-telemetry}
\begin{DoxyCompactList}\small\item\em Packages a telemetry point into a J\-S\-O\-N string. \end{DoxyCompactList}\item 
def \hyperlink{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_ab4ed3eb62a12fa5492613c87bd3a3e10}{\-\_\-connection\-\_\-setup\-\_\-error}
\begin{DoxyCompactList}\small\item\em Handles errors that arise during the telemetry protocol connection setup. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Represents a pipeline telemetry connection. 

This Protocol is used to represent a connection to a pipeline's telemetry stream. It is responsible for relaying telemetry data (provided by the Session) to the connected pipeline user. Typically, the user will connect to a pipeline's telemetry stream via their browser as they monitor the pass using the Mercury2 User Interface. Because pipeline telemetry is inherently message based, and because it needs to be easily accessible by a web browser, this Protocol uses the Web\-Socket protocol.

\begin{DoxyNote}{Note}
Because this protocol is inherently one way, any data sent by the user will simply be dropped.
\end{DoxyNote}
\begin{DoxySeeAlso}{See Also}
\href{https://en.wikipedia.org/wiki/WebSocket}{\tt https\-://en.\-wikipedia.\-org/wiki/\-Web\-Socket} 
\end{DoxySeeAlso}


\subsection{Constructor \& Destructor Documentation}
\hypertarget{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a905edbf047171e13942d8e200b8b4bc7}{\index{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}!\-\_\-\-\_\-init\-\_\-\-\_\-@{\-\_\-\-\_\-init\-\_\-\-\_\-}}
\index{\-\_\-\-\_\-init\-\_\-\-\_\-@{\-\_\-\-\_\-init\-\_\-\-\_\-}!hwm::network::protocols::telemetry::PipelineTelemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}}
\subsubsection[{\-\_\-\-\_\-init\-\_\-\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}def hwm.\-network.\-protocols.\-telemetry.\-Pipeline\-Telemetry.\-\_\-\-\_\-init\-\_\-\-\_\- (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{session\-\_\-coordinator}
\end{DoxyParamCaption}
)}}\label{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a905edbf047171e13942d8e200b8b4bc7}


Sets up the \hyperlink{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry}{Pipeline\-Telemetry} protocol instance. 


\begin{DoxyParams}{Parameters}
{\em session\-\_\-coordinator} & A Session\-Coordinator instance that will be used to locate requested sessions. \\
\hline
\end{DoxyParams}


\subsection{Member Function Documentation}
\hypertarget{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_ab4ed3eb62a12fa5492613c87bd3a3e10}{\index{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}!\-\_\-connection\-\_\-setup\-\_\-error@{\-\_\-connection\-\_\-setup\-\_\-error}}
\index{\-\_\-connection\-\_\-setup\-\_\-error@{\-\_\-connection\-\_\-setup\-\_\-error}!hwm::network::protocols::telemetry::PipelineTelemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}}
\subsubsection[{\-\_\-connection\-\_\-setup\-\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}def hwm.\-network.\-protocols.\-telemetry.\-Pipeline\-Telemetry.\-\_\-connection\-\_\-setup\-\_\-error (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{failure}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_ab4ed3eb62a12fa5492613c87bd3a3e10}


Handles errors that arise during the telemetry protocol connection setup. 

\begin{DoxyVerb} This callback handles errors that may occur when authenticating the protocol user and loading their requested
 session. It logs the error and cleans up the protocol's connection.
\end{DoxyVerb}



\begin{DoxyParams}{Parameters}
{\em failure} & A Failure object encapsulating the error. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns None after handling the error. 
\end{DoxyReturn}
\hypertarget{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a4c453f4727b3e7ad2f02da3fc998c844}{\index{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}!\-\_\-package\-\_\-telemetry@{\-\_\-package\-\_\-telemetry}}
\index{\-\_\-package\-\_\-telemetry@{\-\_\-package\-\_\-telemetry}!hwm::network::protocols::telemetry::PipelineTelemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}}
\subsubsection[{\-\_\-package\-\_\-telemetry}]{\setlength{\rightskip}{0pt plus 5cm}def hwm.\-network.\-protocols.\-telemetry.\-Pipeline\-Telemetry.\-\_\-package\-\_\-telemetry (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{source\-\_\-id, }
\item[{}]{stream, }
\item[{}]{timestamp, }
\item[{}]{telemetry\-\_\-datum, }
\item[{}]{binary = {\ttfamily False}, }
\item[{}]{extra\-\_\-headers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a4c453f4727b3e7ad2f02da3fc998c844}


Packages a telemetry point into a J\-S\-O\-N string. 

\begin{DoxyVerb} This method packages up the provided telemetry data point into a JSON string in preparation for transmission. The 
 extra_headers will be included as top level attributes in the resulting JSON object.
\end{DoxyVerb}


\begin{DoxyNote}{Note}
If the telemetry point consists of binary data, it will be B\-A\-S\-E64 encoded before being returned.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em source\-\_\-id} & The I\-D of the device or pipeline that generated the telemetry datum. \\
\hline
{\em stream} & A string identifying which of the device's telemetry streams the datum should be associated with. \\
\hline
{\em timestamp} & A unix timestamp specifying when the telemetry point was assembled. \\
\hline
{\em telemetry\-\_\-datum} & The actual telemetry datum. Can take many forms (e.\-g. a dictionary or binary webcam image). \\
\hline
{\em binary} & Whether or not the telemetry payload consists of binary data. If set to true, the data will be encoded before being sent to the user. \\
\hline
{\em $\ast$$\ast$extra\-\_\-headers} & A dictionary containing extra keyword arguments that should be included as additional headers when sending the telemetry datum. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns a J\-S\-O\-N string encapsulating the telemetry data point. 
\end{DoxyReturn}
\hypertarget{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a3924681e40aab5ed413e40cd5031c9c4}{\index{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}!connection\-Made@{connection\-Made}}
\index{connection\-Made@{connection\-Made}!hwm::network::protocols::telemetry::PipelineTelemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}}
\subsubsection[{connection\-Made}]{\setlength{\rightskip}{0pt plus 5cm}def hwm.\-network.\-protocols.\-telemetry.\-Pipeline\-Telemetry.\-connection\-Made (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a3924681e40aab5ed413e40cd5031c9c4}


Sets up the telemetry protocol before any data transfer occurs. 

\begin{DoxyVerb} This method sets up the protocol right after the connection has been established. It is responsible for calling a
 function that will wait and load the user's certificate after the TLS handshake has been performed.
\end{DoxyVerb}


\begin{DoxyNote}{Note}
Because this method may be (and probably will be) called before the connection's T\-L\-S handshake is complete, it calls an additional function that periodically checks if the client's certificate is available and, once it is, returns it via a deferred. Any data that the user tries to pass to the connection before the T\-L\-S handshake has completed will be dropped. 
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
Returns a deferred that will be fired with the requested Session. 
\end{DoxyReturn}
\hypertarget{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_af7bb78b3c184071f5824346a6beda2c5}{\index{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}!data\-Received@{data\-Received}}
\index{data\-Received@{data\-Received}!hwm::network::protocols::telemetry::PipelineTelemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}}
\subsubsection[{data\-Received}]{\setlength{\rightskip}{0pt plus 5cm}def hwm.\-network.\-protocols.\-telemetry.\-Pipeline\-Telemetry.\-data\-Received (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{data}
\end{DoxyParamCaption}
)}}\label{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_af7bb78b3c184071f5824346a6beda2c5}


Receives any data that the user may try to send over the connection. 

\begin{DoxyNote}{Note}
Because the telemetry stream is one way, any data received by this function will simply be ignored.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em data} & A chunk of data of arbitrary size from the user that will be ignored. \\
\hline
\end{DoxyParams}
\hypertarget{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a5196bc8e497f981644554fabb94472b9}{\index{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}!perform\-\_\-registrations@{perform\-\_\-registrations}}
\index{perform\-\_\-registrations@{perform\-\_\-registrations}!hwm::network::protocols::telemetry::PipelineTelemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}}
\subsubsection[{perform\-\_\-registrations}]{\setlength{\rightskip}{0pt plus 5cm}def hwm.\-network.\-protocols.\-telemetry.\-Pipeline\-Telemetry.\-perform\-\_\-registrations (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{requested\-\_\-session}
\end{DoxyParamCaption}
)}}\label{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a5196bc8e497f981644554fabb94472b9}


Performs the necessary registrations between the protocol and its associated session. 

\begin{DoxyVerb} This callback makes the necessary registrations between the pipeline data protocol, its Session, and its pipeline's
 telemetry producer. It will be called with session specified in the client's TLS certificate after the TLS handshake
 is complete.
\end{DoxyVerb}



\begin{DoxyExceptions}{Exceptions}
{\em May} & pass along session.\-Protocol\-Already\-Registered exceptions when trying to register this protocol with its session.\\
\hline
\end{DoxyExceptions}

\begin{DoxyParams}{Parameters}
{\em requested\-\_\-session} & The session associated with the protocol. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns the newly loaded Session that was passed to this callback. 
\end{DoxyReturn}
\hypertarget{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a1ed35df69655f6d92f0562bff4be28e1}{\index{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}!write\-\_\-telemetry@{write\-\_\-telemetry}}
\index{write\-\_\-telemetry@{write\-\_\-telemetry}!hwm::network::protocols::telemetry::PipelineTelemetry@{hwm\-::network\-::protocols\-::telemetry\-::\-Pipeline\-Telemetry}}
\subsubsection[{write\-\_\-telemetry}]{\setlength{\rightskip}{0pt plus 5cm}def hwm.\-network.\-protocols.\-telemetry.\-Pipeline\-Telemetry.\-write\-\_\-telemetry (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{source\-\_\-id, }
\item[{}]{stream, }
\item[{}]{timestamp, }
\item[{}]{telemetry\-\_\-datum, }
\item[{}]{binary = {\ttfamily False}, }
\item[{}]{extra\-\_\-headers}
\end{DoxyParamCaption}
)}}\label{classhwm_1_1network_1_1protocols_1_1telemetry_1_1_pipeline_telemetry_a1ed35df69655f6d92f0562bff4be28e1}


Sends a telemetry data point to the user. 

\begin{DoxyVerb} This method sends the specified telemetry data point to the protocol's connected user. It will first package up the 
 telemetry point into a JSON string and then send it to the user. 
\end{DoxyVerb}



\begin{DoxyParams}{Parameters}
{\em source\-\_\-id} & The I\-D of the device or pipeline that generated the telemetry datum. \\
\hline
{\em stream} & A string identifying which of the device's telemetry streams the datum should be associated with. \\
\hline
{\em timestamp} & A unix timestamp specifying when the telemetry point was assembled. \\
\hline
{\em telemetry\-\_\-datum} & The actual telemetry datum. Can take many forms (e.\-g. a dictionary or binary webcam image). \\
\hline
{\em binary} & Whether or not the telemetry payload consists of binary data. If set to true, the data will be encoded before being sent to the user. \\
\hline
{\em $\ast$$\ast$extra\-\_\-headers} & A dictionary containing extra keyword arguments that should be included as additional headers when sending the telemetry datum. \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
hwm/network/protocols/telemetry.\-py\end{DoxyCompactItemize}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Mercury2 Hardware Manager: hwm.network.security.permissions.PermissionManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Mercury2 Hardware Manager
   &#160;<span id="projectnumber">1.0dev</span>
   </div>
   <div id="projectbrief">The hardware manager component of the Mercury2 ground station suite.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">hwm.network.security.permissions.PermissionManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Stores and provides access to user permission settings.  
 <a href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afec88b3af9dd60f747301326a74bcc41"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html#afec88b3af9dd60f747301326a74bcc41">__init__</a></td></tr>
<tr class="memdesc:afec88b3af9dd60f747301326a74bcc41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up the permission manager.  <a href="#afec88b3af9dd60f747301326a74bcc41">More...</a><br/></td></tr>
<tr class="separator:afec88b3af9dd60f747301326a74bcc41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5421104d64c12e1a91840ea0597b4b3a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html#a5421104d64c12e1a91840ea0597b4b3a">get_user_permissions</a></td></tr>
<tr class="memdesc:a5421104d64c12e1a91840ea0597b4b3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the permissions structure for the indicated user.  <a href="#a5421104d64c12e1a91840ea0597b4b3a">More...</a><br/></td></tr>
<tr class="separator:a5421104d64c12e1a91840ea0597b4b3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39ec9fc3abdaffa9df1fc77ce62272d2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html#a39ec9fc3abdaffa9df1fc77ce62272d2">purge_user_permissions</a></td></tr>
<tr class="memdesc:a39ec9fc3abdaffa9df1fc77ce62272d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all old permission settings.  <a href="#a39ec9fc3abdaffa9df1fc77ce62272d2">More...</a><br/></td></tr>
<tr class="separator:a39ec9fc3abdaffa9df1fc77ce62272d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a743878796edbfea6ad79d14a9e775c1b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a743878796edbfea6ad79d14a9e775c1b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>permissions</b></td></tr>
<tr class="separator:a743878796edbfea6ad79d14a9e775c1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb81e8878b75fe8f03cd81e09252b7ad"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adb81e8878b75fe8f03cd81e09252b7ad"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>use_remote_permissions</b></td></tr>
<tr class="separator:adb81e8878b75fe8f03cd81e09252b7ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a866a8b2484cc971c1f7e9ea09d3d98b9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a866a8b2484cc971c1f7e9ea09d3d98b9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>permissions_location</b></td></tr>
<tr class="separator:a866a8b2484cc971c1f7e9ea09d3d98b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3079e7439ef0ae339441d340e3571c59"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3079e7439ef0ae339441d340e3571c59"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>config</b></td></tr>
<tr class="separator:a3079e7439ef0ae339441d340e3571c59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af251658bfb44b61857a432a0592ff412"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af251658bfb44b61857a432a0592ff412"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>update_frequency</b></td></tr>
<tr class="separator:af251658bfb44b61857a432a0592ff412"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ad89fa81a774d6ce3374f1099056f8030"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html#ad89fa81a774d6ce3374f1099056f8030">_update_user_permissions</a></td></tr>
<tr class="memdesc:ad89fa81a774d6ce3374f1099056f8030"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the permissions for the indicated user.  <a href="#ad89fa81a774d6ce3374f1099056f8030">More...</a><br/></td></tr>
<tr class="separator:ad89fa81a774d6ce3374f1099056f8030"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2364f905e94b6fd6e7592c00fe848aed"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html#a2364f905e94b6fd6e7592c00fe848aed">_download_remote_permissions</a></td></tr>
<tr class="memdesc:a2364f905e94b6fd6e7592c00fe848aed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the user's permissions from a remote location.  <a href="#a2364f905e94b6fd6e7592c00fe848aed">More...</a><br/></td></tr>
<tr class="separator:a2364f905e94b6fd6e7592c00fe848aed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a28289c571a99136961b110e568fdd3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html#a2a28289c571a99136961b110e568fdd3">_load_local_permissions</a></td></tr>
<tr class="memdesc:a2a28289c571a99136961b110e568fdd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the user's permissions from a local file.  <a href="#a2a28289c571a99136961b110e568fdd3">More...</a><br/></td></tr>
<tr class="separator:a2a28289c571a99136961b110e568fdd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bd6749086c0532ebfbe7aca4d486851"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html#a7bd6749086c0532ebfbe7aca4d486851">_background_update_error</a></td></tr>
<tr class="memdesc:a7bd6749086c0532ebfbe7aca4d486851"><td class="mdescLeft">&#160;</td><td class="mdescRight">This callback responds to errors when updating the permissions in the background.  <a href="#a7bd6749086c0532ebfbe7aca4d486851">More...</a><br/></td></tr>
<tr class="separator:a7bd6749086c0532ebfbe7aca4d486851"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0eb5cbf78502874d25842efecbecd6f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html#aa0eb5cbf78502874d25842efecbecd6f">_save_permissions</a></td></tr>
<tr class="memdesc:aa0eb5cbf78502874d25842efecbecd6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves the user command execution permission settings in the <a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html" title="Stores and provides access to user permission settings. ">PermissionManager</a>.  <a href="#aa0eb5cbf78502874d25842efecbecd6f">More...</a><br/></td></tr>
<tr class="separator:aa0eb5cbf78502874d25842efecbecd6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4f252a76fcaa6f4778045a13eae42a3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html#ab4f252a76fcaa6f4778045a13eae42a3">_validate_permissions</a></td></tr>
<tr class="memdesc:ab4f252a76fcaa6f4778045a13eae42a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validates the provided permission settings.  <a href="#ab4f252a76fcaa6f4778045a13eae42a3">More...</a><br/></td></tr>
<tr class="separator:ab4f252a76fcaa6f4778045a13eae42a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Stores and provides access to user permission settings. </p>
<p>This class stores user command permission settings for use by the command parser and related classes. All permission settings are stored with an associated timestamp. This is used to invalidate permissions after a set amount of time, forcing a redownload. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="afec88b3af9dd60f747301326a74bcc41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def hwm.network.security.permissions.PermissionManager.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>permissions_endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>update_frequency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up the permission manager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">permissions_endpoint</td><td>The location that can be queried to find user command permissions. This can either be the mercury2 user interface API or a file. If this points to the mercury2 API, it must start with http or https. </td></tr>
    <tr><td class="paramname">update_frequency</td><td>How often the user's permissions should be updated (i.e. if a user's permissions are requested and the cached version is older than this value, update them). Specified in seconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a7bd6749086c0532ebfbe7aca4d486851"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def hwm.network.security.permissions.PermissionManager._background_update_error </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>update_error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This callback responds to errors when updating the permissions in the background. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">update_error</td><td>A Failure object containing the error. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Simply returns True to keep the error from getting collected. </dd></dl>

</div>
</div>
<a class="anchor" id="a2364f905e94b6fd6e7592c00fe848aed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def hwm.network.security.permissions.PermissionManager._download_remote_permissions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>user_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loads the user's permissions from a remote location. </p>
<pre class="fragment"> This method loads the specified user's command execution permissions from a remote location (e.g. the mercury2 
 user interface) and returns them.
</pre><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permissions_error.html">PermissionsError</a></td><td>if an error occurs while downloading or parsing the schedule. </td></tr>
    <tr><td class="paramname">May</td><td>throw <a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permissions_invalid_schema.html">PermissionsInvalidSchema</a> if the permission settings do not conform to the defined schema.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This method is intended to be called with threads.deferToThread. The returned permissions will be passed to the resulting deferred's callback chain.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user_id</td><td>The ID of the user we want to download permissions for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns an array of JSON objects representing the permissions for each queried user. Note that in this case the array will only have a single element. </dd></dl>

</div>
</div>
<a class="anchor" id="a2a28289c571a99136961b110e568fdd3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def hwm.network.security.permissions.PermissionManager._load_local_permissions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>user_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load the user's permissions from a local file. </p>
<pre class="fragment"> This method loads the specified user's command execution permissions from a local master permissions file (generated
 by the mercury2 user interface). 
</pre><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permissions_error.html">PermissionsError</a></td><td>if the file can't be loaded for some reason. </td></tr>
    <tr><td class="paramname">May</td><td>throw <a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permissions_invalid_schema.html">PermissionsInvalidSchema</a> if the permission settings file does not conform to the defined schema.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This method is intended to be called with threads.deferToThread. The returned permissions will be passed to the resulting deferred's callback chain.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user_id</td><td>The ID of the user to load permissions for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns an array of JSON objects representing the permissions for each queried user. Note that in this case the array will only have a single element. </dd></dl>

</div>
</div>
<a class="anchor" id="aa0eb5cbf78502874d25842efecbecd6f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def hwm.network.security.permissions.PermissionManager._save_permissions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>permission_settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>user_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Saves the user command execution permission settings in the <a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html" title="Stores and provides access to user permission settings. ">PermissionManager</a>. </p>
<pre class="fragment"> This callback saves the permissions for every user with permissions defined in permission settings.
</pre><dl class="section note"><dt>Note</dt><dd>Depending on how the permissions are loaded (i.e. either from a remote API location or a local offline file), permission_settings can contain the permissions for multiple users. Regardless of how many users are represented in permission_settings, the permissions will be saved for all of them. This prevents frequent file loads when operating in offline mode. </dd>
<dd>
If a user already has non-expired permissions in the manager, they will be overwritten by the new values.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permissions_user_not_found.html">PermissionsUserNotFound</a></td><td>if the user originally indicated couldn't be located in the loaded permissions resource.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">permission_settings</td><td>An array containing the JSON permission objects for users it includes. </td></tr>
    <tr><td class="paramname">user_id</td><td>The ID of the user that was initially queried for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the permission settings for the user that was originally queried for. </dd></dl>

</div>
</div>
<a class="anchor" id="ad89fa81a774d6ce3374f1099056f8030"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def hwm.network.security.permissions.PermissionManager._update_user_permissions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>user_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the permissions for the indicated user. </p>
<pre class="fragment"> This method downloads (or loads), validates, and saves the specified user's permission settings.
</pre><dl class="section note"><dt>Note</dt><dd>If a non-remote permissions endpoint is specified, the permissions will be loaded from the offline local file. </dd>
<dd>
If the indicated user already has permission settings recorded, they will be overridden with the new settings.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Throws</td><td><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permissions_invalid_schema.html">PermissionsInvalidSchema</a> if the dictionary defined in permission_settings does not conform to the permission settings schema, as checked by <a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html#ab4f252a76fcaa6f4778045a13eae42a3" title="Validates the provided permission settings. ">_validate_permissions()</a>. </td></tr>
    <tr><td class="paramname"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permissions_user_not_found.html">PermissionsUserNotFound</a></td><td>if the indicated user couldn't be located in the loaded permissions resource.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user_id</td><td>The ID of the user that the command permissions are for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a deferred that will be fired with the results of the permission settings load/download. That is, an error or the permissions object for the indicated user. </dd></dl>

</div>
</div>
<a class="anchor" id="ab4f252a76fcaa6f4778045a13eae42a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def hwm.network.security.permissions.PermissionManager._validate_permissions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>raw_permissions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>user_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validates the provided permission settings. </p>
<pre class="fragment"> This method makes sure that the provided permission structure conforms to the defined JSON schema.
</pre><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Throws</td><td><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permissions_invalid_schema.html">PermissionsInvalidSchema</a> if the dictionary defined in permission_settings does not conform to the permission settings schema. </td></tr>
    <tr><td class="paramname">Throws</td><td><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permissions_error.html">PermissionsError</a> if the raw permissions resource can't be parsed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">raw_permissions</td><td>A raw, unparsed, permissions resource file (either from net or local machine). </td></tr>
    <tr><td class="paramname">user_id</td><td>The ID of the user who's permissions are being queried for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a dictionary containing the parsed permissions. </dd></dl>

</div>
</div>
<a class="anchor" id="a5421104d64c12e1a91840ea0597b4b3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def hwm.network.security.permissions.PermissionManager.get_user_permissions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>user_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the permissions structure for the indicated user. </p>
<pre class="fragment"> If the user does not have any permissions loaded, they will be downloaded/loaded in a thread and returned via a 
 deferred. If the user does have cached permissions, they will be fired immediately into the returned deferred (and 
 will get updated in the background if they are too old).
</pre><dl class="section note"><dt>Note</dt><dd>The permissions returned from this function are a copy. That is, they don't reference the permission manager's main permission dictionary.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Throws</td><td><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permissions_user_not_found.html">PermissionsUserNotFound</a> if the specified user doesn't have any permission settings saved.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user_id</td><td>The ID of the user to fetch permissions for. This refers to the UUID that was generated for the user, not their username. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a deferred that will be fired with the user's permissions (or an error, if one occurs). </dd></dl>

</div>
</div>
<a class="anchor" id="a39ec9fc3abdaffa9df1fc77ce62272d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def hwm.network.security.permissions.PermissionManager.purge_user_permissions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>age</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes all old permission settings. </p>
<pre class="fragment"> This method removes all permission settings entries older than the specified value. Once the permissions have been 
 removed, applicable calls to get_user_permissions will fail and the permissions will be re-downloaded.
</pre><dl class="section note"><dt>Note</dt><dd>The preferred way to update user permissions is to simply let get_user_permissions do it automatically if needed and return the old cached user permissions while they're being updated. If this method is used instead, the deferred returned from get_user_permissions will take longer more often as the permissions are being updated.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">age</td><td>Any permission entries older than age will be purged. The age is specified in seconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>hwm/network/security/permissions.py</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>hwm</b></li><li class="navelem"><b>network</b></li><li class="navelem"><b>security</b></li><li class="navelem"><a class="el" href="namespacehwm_1_1network_1_1security_1_1permissions.html">permissions</a></li><li class="navelem"><a class="el" href="classhwm_1_1network_1_1security_1_1permissions_1_1_permission_manager.html">PermissionManager</a></li>
    <li class="footer">Generated on Thu Apr 24 2014 13:27:41 for Mercury2 Hardware Manager by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
